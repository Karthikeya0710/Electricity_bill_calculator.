
import React from 'react';
import type { BillInputs, BillResults } from '../types';

interface BillPreviewProps {
    inputs: BillInputs;
    results: BillResults;
}

const BillRow: React.FC<{ label: string; value: string | number; unit?: string; highlight?: boolean }> = ({ label, value, unit, highlight = false }) => (
    <div className={`flex justify-between border-b py-2 ${highlight ? 'font-bold' : ''}`}>
        <span className="text-gray-600">{label}</span>
        <span>{value}{unit && ` ${unit}`}</span>
    </div>
);


const BillPreview: React.FC<BillPreviewProps> = ({ inputs, results }) => {
    const billDate = new Date().toLocaleDateString('en-GB', {
        day: '2-digit',
        month: 'long',
        year: 'numeric',
    });

    return (
        <div className="hidden print:block">
            <div className="mx-auto max-w-2xl border bg-white p-8">
                <header className="mb-8 border-b-2 border-yellow-400 pb-4 text-center">
                    <h1 className="text-3xl font-bold">Electricity Bill Estimate</h1>
                    <p className="text-gray-500">Date: {billDate}</p>
                    <p className="mt-2 text-lg">For: <span className="font-semibold">{inputs.ownerName || 'N/A'}</span></p>
                </header>

                <section className="mb-8">
                    <h2 className="mb-2 text-xl font-semibold">Usage Details</h2>
                    <div className="space-y-2 rounded-lg border p-4">
                        <BillRow label="Power Rating" value={inputs.power} unit="W" />
                        <BillRow label="Daily Usage" value={inputs.hours} unit="hours/day" />
                        <BillRow label="Billing Period" value={inputs.days} unit="days" />
                        <BillRow label="Rate" value={`₹${inputs.rate}`} unit="/ kWh" />
                    </div>
                </section>
                
                <section>
                    <h2 className="mb-2 text-xl font-semibold">Calculation Summary</h2>
                     <div className="space-y-2 rounded-lg border p-4">
                        <BillRow label="Total Energy Consumed" value={results.energyKWh.toFixed(3)} unit="kWh" />
                        <hr className="my-2"/>
                        <BillRow label="Energy Charge" value={`₹ ${results.subTotal.toFixed(2)}`} />
                        <BillRow label="Taxes" value={`₹ ${results.taxAmount.toFixed(2)}`} />
                        <BillRow label="Fixed Charges" value={`₹ ${(parseFloat(inputs.fixedCharge) || 0).toFixed(2)}`} />
                         <div className="!mt-4 border-t-2 border-black pt-2">
                             <BillRow label="Total Amount Payable" value={`₹ ${results.totalAmount.toFixed(2)}`} highlight={true} />
                        </div>
                    </div>
                </section>

                 <footer className="mt-12 text-center text-xs text-gray-500">
                    <p>This is a computer-generated bill estimate and does not include all utility provider charges.</p>
                    <p>Thank you for using the Electricity Bill Calculator.</p>
                </footer>
            </div>
        </div>
    );
};

export default BillPreview;
